generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  password  String
  bloodGroup String
  city      String
  role      String   @default("user")
  createdAt DateTime @default(now())
  
  requests      Request[]
  donationQueue DonationQueue[]
}

model Request {
  id          String   @id @default(cuid())
  requesterId String
  bloodGroup  String
  unitsNeeded Int
  location    String
  message     String?
  status      String   @default("active")
  createdAt   DateTime @default(now())
  
  requester     User            @relation(fields: [requesterId], references: [id])
  donationQueue DonationQueue[]
}

model DonationQueue {
  id        String   @id @default(cuid())
  requestId String
  donorId   String
  joinedAt  DateTime @default(now())
  
  request Request @relation(fields: [requestId], references: [id])
  donor   User    @relation(fields: [donorId], references: [id])
  
  @@unique([requestId, donorId])
}